import{q as de,s as fe,d as se,r as x,e as $,h as ae,w as f,M as re,f as R,j as d,i as le,v as me,k as L,t as oe,F as he,_ as ue,x as pe,a as _e,y as ve,c as ge,l as A,m as ie,p as $e,z as ye}from"./index.7f5f4b78.js";import{g as De,c as be,t as we}from"./logistics.0fabf569.js";var ce={exports:{}};(function(J,j){(function(T,B){J.exports=B()})(de,function(){var T=1e3,B=6e4,b=36e5,w="millisecond",C="second",F="minute",_="hour",p="day",S="week",g="month",z="quarter",y="year",k="date",Z="Invalid Date",X=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(s){var n=["th","st","nd","rd"],e=s%100;return"["+s+(n[(e-20)%10]||n[e]||n[0])+"]"}},N=function(s,n,e){var a=String(s);return!a||a.length>=n?s:""+Array(n+1-a.length).join(e)+s},ne={s:N,z:function(s){var n=-s.utcOffset(),e=Math.abs(n),a=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+N(a,2,"0")+":"+N(t,2,"0")},m:function s(n,e){if(n.date()<e.date())return-s(e,n);var a=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(a,g),i=e-t<0,u=n.clone().add(a+(i?-1:1),g);return+(-(a+(e-t)/(i?t-u:u-t))||0)},a:function(s){return s<0?Math.ceil(s)||0:Math.floor(s)},p:function(s){return{M:g,y,w:S,d:p,D:k,h:_,m:F,s:C,ms:w,Q:z}[s]||String(s||"").toLowerCase().replace(/s$/,"")},u:function(s){return s===void 0}},Y="en",O={};O[Y]=te;var q="$isDayjsObject",W=function(s){return s instanceof M||!(!s||!s[q])},I=function s(n,e,a){var t;if(!n)return Y;if(typeof n=="string"){var i=n.toLowerCase();O[i]&&(t=i),e&&(O[i]=e,t=i);var u=n.split("-");if(!t&&u.length>1)return s(u[0])}else{var l=n.name;O[l]=n,t=l}return!a&&t&&(Y=t),t||!a&&Y},o=function(s,n){if(W(s))return s.clone();var e=typeof n=="object"?n:{};return e.date=s,e.args=arguments,new M(e)},r=ne;r.l=I,r.i=W,r.w=function(s,n){return o(s,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var M=function(){function s(e){this.$L=I(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[q]=!0}var n=s.prototype;return n.parse=function(e){this.$d=function(a){var t=a.date,i=a.utc;if(t===null)return new Date(NaN);if(r.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var u=t.match(X);if(u){var l=u[2]-1||0,m=(u[7]||"0").substring(0,3);return i?new Date(Date.UTC(u[1],l,u[3]||1,u[4]||0,u[5]||0,u[6]||0,m)):new Date(u[1],l,u[3]||1,u[4]||0,u[5]||0,u[6]||0,m)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return r},n.isValid=function(){return this.$d.toString()!==Z},n.isSame=function(e,a){var t=o(e);return this.startOf(a)<=t&&t<=this.endOf(a)},n.isAfter=function(e,a){return o(e)<this.startOf(a)},n.isBefore=function(e,a){return this.endOf(a)<o(e)},n.$g=function(e,a,t){return r.u(e)?this[a]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,a){var t=this,i=!!r.u(a)||a,u=r.p(e),l=function(H,D){var E=r.w(t.$u?Date.UTC(t.$y,D,H):new Date(t.$y,D,H),t);return i?E:E.endOf(p)},m=function(H,D){return r.w(t.toDate()[H].apply(t.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(D)),t)},h=this.$W,c=this.$M,v=this.$D,U="set"+(this.$u?"UTC":"");switch(u){case y:return i?l(1,0):l(31,11);case g:return i?l(1,c):l(0,c+1);case S:var V=this.$locale().weekStart||0,K=(h<V?h+7:h)-V;return l(i?v-K:v+(6-K),c);case p:case k:return m(U+"Hours",0);case _:return m(U+"Minutes",1);case F:return m(U+"Seconds",2);case C:return m(U+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,a){var t,i=r.p(e),u="set"+(this.$u?"UTC":""),l=(t={},t[p]=u+"Date",t[k]=u+"Date",t[g]=u+"Month",t[y]=u+"FullYear",t[_]=u+"Hours",t[F]=u+"Minutes",t[C]=u+"Seconds",t[w]=u+"Milliseconds",t)[i],m=i===p?this.$D+(a-this.$W):a;if(i===g||i===y){var h=this.clone().set(k,1);h.$d[l](m),h.init(),this.$d=h.set(k,Math.min(this.$D,h.daysInMonth())).$d}else l&&this.$d[l](m);return this.init(),this},n.set=function(e,a){return this.clone().$set(e,a)},n.get=function(e){return this[r.p(e)]()},n.add=function(e,a){var t,i=this;e=Number(e);var u=r.p(a),l=function(c){var v=o(i);return r.w(v.date(v.date()+Math.round(c*e)),i)};if(u===g)return this.set(g,this.$M+e);if(u===y)return this.set(y,this.$y+e);if(u===p)return l(1);if(u===S)return l(7);var m=(t={},t[F]=B,t[_]=b,t[C]=T,t)[u]||1,h=this.$d.getTime()+e*m;return r.w(h,this)},n.subtract=function(e,a){return this.add(-1*e,a)},n.format=function(e){var a=this,t=this.$locale();if(!this.isValid())return t.invalidDate||Z;var i=e||"YYYY-MM-DDTHH:mm:ssZ",u=r.z(this),l=this.$H,m=this.$m,h=this.$M,c=t.weekdays,v=t.months,U=t.meridiem,V=function(D,E,P,Q){return D&&(D[E]||D(a,i))||P[E].slice(0,Q)},K=function(D){return r.s(l%12||12,D,"0")},H=U||function(D,E,P){var Q=D<12?"AM":"PM";return P?Q.toLowerCase():Q};return i.replace(ee,function(D,E){return E||function(P){switch(P){case"YY":return String(a.$y).slice(-2);case"YYYY":return r.s(a.$y,4,"0");case"M":return h+1;case"MM":return r.s(h+1,2,"0");case"MMM":return V(t.monthsShort,h,v,3);case"MMMM":return V(v,h);case"D":return a.$D;case"DD":return r.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return V(t.weekdaysMin,a.$W,c,2);case"ddd":return V(t.weekdaysShort,a.$W,c,3);case"dddd":return c[a.$W];case"H":return String(l);case"HH":return r.s(l,2,"0");case"h":return K(1);case"hh":return K(2);case"a":return H(l,m,!0);case"A":return H(l,m,!1);case"m":return String(m);case"mm":return r.s(m,2,"0");case"s":return String(a.$s);case"ss":return r.s(a.$s,2,"0");case"SSS":return r.s(a.$ms,3,"0");case"Z":return u}return null}(D)||u.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,a,t){var i,u=this,l=r.p(a),m=o(e),h=(m.utcOffset()-this.utcOffset())*B,c=this-m,v=function(){return r.m(u,m)};switch(l){case y:i=v()/12;break;case g:i=v();break;case z:i=v()/3;break;case S:i=(c-h)/6048e5;break;case p:i=(c-h)/864e5;break;case _:i=c/b;break;case F:i=c/B;break;case C:i=c/T;break;default:i=c}return t?i:r.a(i)},n.daysInMonth=function(){return this.endOf(g).$D},n.$locale=function(){return O[this.$L]},n.locale=function(e,a){if(!e)return this.$L;var t=this.clone(),i=I(e,a,!0);return i&&(t.$L=i),t},n.clone=function(){return r.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},s}(),G=M.prototype;return o.prototype=G,[["$ms",w],["$s",C],["$m",F],["$H",_],["$W",p],["$M",g],["$y",y],["$D",k]].forEach(function(s){G[s[1]]=function(n){return this.$g(n,s[0],s[1])}}),o.extend=function(s,n){return s.$i||(s(n,M,o),s.$i=!0),o},o.locale=I,o.isDayjs=W,o.unix=function(s){return o(1e3*s)},o.en=O[Y],o.Ls=O,o.p={},o})})(ce);var Ce=ce.exports;const Me={solution:"/common/solution"};function Se(){return fe.get({url:Me.solution})}const ke={class:"timeline-custom-content"},xe=se({__name:"TrackDrawer",setup(J,{expose:j}){const T=x(),B=x([]),b=x(!1),w=p=>{b.value=p},C=(p,S)=>{B.value=S,T.value=p,w(!0)},F=()=>{w(!1)},_=async()=>{const p=`https://t.17track.net/#nums=${T.value}`;try{await navigator.clipboard.writeText(p),console.log("Content copied to clipboard"),re.success("\u590D\u5236\u6210\u529F")}catch(S){console.error("Failed to copy: ",S),re.error("\u590D\u5236\u5931\u8D25")}};return j({handleShow:C}),(p,S)=>{const g=$("t-timeline-item"),z=$("t-timeline"),y=$("t-drawer");return R(),ae(y,{visible:b.value,onConfirm:_,cancelBtn:"\u5173\u95ED",confirmBtn:"\u590D\u5236\u8F68\u8FF9\u94FE\u63A5",preventScrollThrough:!1,header:T.value,size:"400px",onClose:F},{default:f(()=>[d(z,{mode:"same",theme:"default"},{default:f(()=>[(R(!0),le(he,null,me(B.value,k=>(R(),ae(g,{dotColor:"primary",label:k.time},{default:f(()=>[L("div",null,oe(k.desc),1),L("div",ke,oe(k.mergeDescription),1)]),_:2},1032,["label"]))),256))]),_:1})]),_:1},8,["visible","header"])}}});var Fe=ue(xe,[["__scopeId","data-v-02f5d503"],["__file","/app/src/pages/logistics/components/TrackDrawer.vue"]]);const Te={class:"list-common-table"},Oe={class:"table-action"},Be={class:"right"},Ae={class:"table-container"},Le=["onClick"],Ee=["onClick"],Ye="index",Ve="top",He=!0,ze=se({__name:"LogisticsTable",setup(J){const j=pe();_e();const T=[{title:"\u7269\u6D41\u8BA2\u5355\u53F7",fixed:"left",width:180,ellipsis:!0,align:"left",colKey:"orderCode"},{title:"\u672B\u516C\u91CC\u8FD0\u5355\u53F7",width:280,ellipsis:!0,align:"left",colKey:"trackingNumber"},{title:"\u6536\u4EF6\u4EBA",ellipsis:!0,align:"left",colKey:"receiverParam.name",width:130},{title:"\u6536\u4EF6\u5730\u5740",ellipsis:!0,align:"left",colKey:"receiverParam.detailAddress",width:380},{title:"\u521B\u5EFA\u65F6\u95F4",width:200,ellipsis:!0,align:"left",colKey:"createdAt"},{align:"left",fixed:"right",width:200,colKey:"op",title:"\u64CD\u4F5C"}],b=x({...{orderCode:void 0,solutionCode:void 0}}),w=x({pageSize:20,total:100,current:1}),C=x(!1),F=x([]),_=x(!1),p=async()=>{_.value=!0;try{const{data:o}=await De({page:w.value.current,pageSize:w.value.pageSize,orderCode:b.value.orderCode,solutionCode:b.value.solutionCode});F.value=o.rows,w.value={current:o.page,pageSize:o.pageSize,total:o.count}}catch(o){console.log(o),_.value=!1}finally{_.value=!1}},S=()=>{y.value=void 0},g=async()=>{try{const o=y.value;(await be({orderCode:o})).code===0&&re.success("Success!")}catch(o){console.log(o)}finally{C.value=!1}S()},z=()=>{S()},y=x(),k=({row:o})=>{y.value=o.orderCode,C.value=!0},Z=o=>{console.log(o)},X=o=>{o.validateResult&&p(),console.log(o)},ee=o=>{w.value.current=o.current,w.value.pageSize=o.pageSize,p()},te=ve(()=>({offsetTop:j.isUseTabsRouter?48:0,container:`.${ye}-layout`})),N=x("all"),ne=o=>{N.value=o},Y=()=>{window.open(location.origin+"/#/logistics/edit","_blank")},O=x([]),q=()=>{Se().then(o=>{O.value=o.data})},W=x(),I=({row:o})=>{_.value=!0;const r=o.orderCode;we({orderCode:r}).then(M=>{_.value=!1,M.code===0&&W.value.handleShow(r,M.data.traceDetailList)}).catch(()=>{_.value=!1})};return ge(()=>{p(),q()}),(o,r)=>{const M=$("t-tab-panel"),G=$("t-tabs"),s=$("t-input"),n=$("t-input-adornment"),e=$("t-form-item"),a=$("t-col"),t=$("t-select"),i=$("t-row"),u=$("t-button"),l=$("t-form"),m=$("t-table"),h=$("t-dialog");return R(),le("div",null,[d(G,{value:N.value,theme:"card",onChange:ne},{default:f(()=>[d(M,{value:"all"},{label:f(()=>r[3]||(r[3]=[A(" \u5168\u90E8 ")])),_:1}),d(M,{value:"pending"},{label:f(()=>r[4]||(r[4]=[A(" \u5F85\u53D1\u8D27 ")])),_:1}),d(M,{value:"transport"},{label:f(()=>r[5]||(r[5]=[A(" \u8FD0\u9001\u4E2D ")])),_:1}),d(M,{value:"finally"},{label:f(()=>r[6]||(r[6]=[A(" \u5DF2\u5B8C\u6210 ")])),_:1}),d(M,{value:"warn"},{label:f(()=>r[7]||(r[7]=[A(" \u5F02\u5E38\u8BA2\u5355 ")])),_:1})]),_:1},8,["value"]),L("div",Te,[d(l,{ref:"form",data:b.value,"label-width":0,colon:"",style:{marginBottom:"8px"},onReset:Z,onSubmit:X},{default:f(()=>[d(i,null,{default:f(()=>[d(a,{span:10},{default:f(()=>[d(i,{gutter:[16,24]},{default:f(()=>[d(a,{span:3},{default:f(()=>[d(e,{name:"orderCode"},{default:f(()=>[d(n,{prepend:"\u7269\u6D41\u8BA2\u5355\u53F7",class:"form-item-content",style:{minWidth:"134px",width:"100%"}},{default:f(()=>[d(s,{modelValue:b.value.orderCode,"onUpdate:modelValue":r[0]||(r[0]=c=>b.value.orderCode=c),type:"search",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7269\u6D41\u8BA2\u5355\u53F7"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),d(a,{span:3},{default:f(()=>[d(e,{name:"solutionCode"},{default:f(()=>[d(t,{modelValue:b.value.solutionCode,"onUpdate:modelValue":r[1]||(r[1]=c=>b.value.solutionCode=c),class:"form-item-content",options:O.value,placeholder:"\u7269\u6D41\u65B9\u6848",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1}),ie(` <t-col :span="3">\r
                <t-form-item name="no">\r
                  <t-input\r
                    v-model="formData.no"\r
                    class="form-item-content"\r
                    placeholder="\u7269\u6D41\u72B6\u6001"\r
                    :style="{ minWidth: '134px' }"\r
                  />\r
                </t-form-item>\r
              </t-col> `)]),_:1})]),_:1}),d(a,{span:2,class:"operation-container"},{default:f(()=>[d(u,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:f(()=>r[8]||(r[8]=[A(" \u67E5\u8BE2 ")])),_:1}),d(u,{type:"reset",variant:"base",theme:"default"},{default:f(()=>r[9]||(r[9]=[A(" \u91CD\u7F6E ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),L("div",Oe,[r[11]||(r[11]=L("div",null,null,-1)),L("div",Be,[d(u,{theme:"primary",onClick:Y},{default:f(()=>r[10]||(r[10]=[A("\u521B\u5EFA\u7269\u6D41\u5355")])),_:1})])]),L("div",Ae,[d(m,{data:F.value,columns:T,"row-key":Ye,"vertical-align":Ve,hover:He,pagination:w.value,loading:_.value,"header-affixed-top":te.value,onPageChange:ee},{createdAt:f(({col:c,row:v})=>[A(oe($e(Ce)(v[c.colKey]).format("YYYY-MM-DD HH:mm:ss")),1)]),op:f(c=>[ie(' <a class="t-button-link" @click="rehandleClickOp(slotProps)">\u7BA1\u7406</a> '),L("a",{class:"t-button-link",onClick:v=>I(c)},"\u67E5\u770B\u7269\u6D41\u8F68\u8FF9",8,Le),L("a",{class:"t-button-link",onClick:v=>k(c)},"\u53D6\u6D88\u8BA2\u5355",8,Ee)]),_:1},8,["data","pagination","loading","header-affixed-top"]),d(h,{visible:C.value,"onUpdate:visible":r[2]||(r[2]=c=>C.value=c),header:"Warn",body:"\u786E\u8BA4\u53D6\u6D88\u5F53\u524D\u6240\u9009\u7269\u6D41\u5355\u5417\uFF1F","on-cancel":z,onConfirm:g},null,8,["visible"])])]),d(Fe,{ref_key:"trackDrawerRef",ref:W},null,512)])}}});var Ne=ue(ze,[["__scopeId","data-v-d63b6438"],["__file","/app/src/pages/logistics/components/LogisticsTable.vue"]]);const We={name:"LogisticsIndex"},Ie=se({...We,setup(J){return(j,T)=>(R(),ae(Ne))}});var Ke=ue(Ie,[["__file","/app/src/pages/logistics/index.vue"]]);export{Ke as default};
