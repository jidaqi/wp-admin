import{o as L,r as d,d as T,u as N,a as M,b as P,c as H,g as O,e as l,f as m,h as C,w as o,i as q,j as t,k as _,l as y,m as a,F as j,n as S,M as V,_ as I,t as U,p as h,T as G}from"./index.f4b8fc03.js";const z=(A=60)=>{let c;L(()=>{clearInterval(c)});const r=d(0);return[r,()=>{r.value=A,c=setInterval(()=>{r.value>0?r.value-=1:(clearInterval(c),r.value=0)},1e3)}]};const J={class:"check-container remember-pwd"},K=T({__name:"Login",setup(A){const c=N(),r={phone:"",account:"",password:"",verifyCode:"",checked:!1,isRemember:!1},w={phone:[{required:!0,message:"\u624B\u673A\u53F7\u5FC5\u586B",type:"error"}],account:[{required:!0,message:"\u8D26\u53F7\u5FC5\u586B",type:"error"}],password:[{required:!0,message:"\u5BC6\u7801\u5FC5\u586B",type:"error"}],verifyCode:[{required:!0,message:"\u9A8C\u8BC1\u7801\u5FC5\u586B",type:"error"}]},n=d("password"),b=d(),u=d({...r}),v=d(!1);z();const D=M(),E=P(),R=async({validateResult:f})=>{if(f===!0)try{await c.login(u.value),V.success("\u767B\u9646\u6210\u529F");const s=E.query.redirect,p=s?decodeURIComponent(s):"/logistics";D.push(p)}catch(s){console.log(s),V.error(s.message)}};return H(()=>{const f=O();f.accountInfo.isRemember&&(u.value.account=f.accountInfo.account,u.value.password=f.accountInfo.password,u.value.isRemember=f.accountInfo.isRemember)}),(f,s)=>{const p=l("t-icon"),e=l("t-input"),F=l("t-form-item"),k=l("t-checkbox"),B=l("t-button"),x=l("t-form");return m(),C(x,{ref_key:"form",ref:b,class:S(["item-container",`login-${n.value}`]),data:u.value,rules:w,"label-width":"0",onSubmit:R},{default:o(()=>[n.value=="password"?(m(),q(j,{key:0},[t(F,{name:"account"},{default:o(()=>[t(e,{modelValue:u.value.account,"onUpdate:modelValue":s[0]||(s[0]=g=>u.value.account=g),size:"large",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},{"prefix-icon":o(()=>[t(p,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),t(F,{name:"password"},{default:o(()=>[t(e,{modelValue:u.value.password,"onUpdate:modelValue":s[2]||(s[2]=g=>u.value.password=g),size:"large",type:v.value?"text":"password",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},{"prefix-icon":o(()=>[t(p,{name:"lock-on"})]),"suffix-icon":o(()=>[t(p,{name:v.value?"browse":"browse-off",onClick:s[1]||(s[1]=g=>v.value=!v.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),_("div",J,[t(k,{modelValue:u.value.isRemember,"onUpdate:modelValue":s[3]||(s[3]=g=>u.value.isRemember=g)},{default:o(()=>s[4]||(s[4]=[y("\u8BB0\u4F4F\u8D26\u53F7")])),_:1},8,["modelValue"]),a(' <span class="tip">\u5FD8\u8BB0\u8D26\u53F7\uFF1F</span> ')])],64)):a("v-if",!0),a(" \u626B\u7801\u767B\u9646 "),a(` <template v-else-if="type == 'qrcode'">
      <div class="tip-container">
        <span class="tip">\u8BF7\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B\u767B\u5F55</span>
        <span class="refresh">\u5237\u65B0 <t-icon name="refresh" /> </span>
      </div>
      <qrcode-vue value="" :size="192" level="H" />
    </template> `),a(" \u624B\u673A\u53F7\u767B\u9646 "),a(` <template v-else>
      <t-form-item name="phone">
        <t-input v-model="formData.phone" size="large" placeholder="\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801">
          <template #prefix-icon>
            <t-icon name="mobile" />
          </template>
        </t-input>
      </t-form-item>

      <t-form-item class="verification-code" name="verifyCode">
        <t-input v-model="formData.verifyCode" size="large" placeholder="\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801" />
        <t-button variant="outline" :disabled="countDown > 0" @click="sendCode">
          {{ countDown == 0 ? '\u53D1\u9001\u9A8C\u8BC1\u7801' : \`\${countDown}\u79D2\u540E\u53EF\u91CD\u53D1\` }}
        </t-button>
      </t-form-item>
    </template> `),n.value!=="qrcode"?(m(),C(F,{key:1,class:"btn-container"},{default:o(()=>[t(B,{block:"",size:"large",type:"submit"},{default:o(()=>s[5]||(s[5]=[y(" \u767B\u5F55 ")])),_:1})]),_:1})):a("v-if",!0),a(` <div class="switch-container">
      <span v-if="type !== 'password'" class="tip" @click="switchType('password')">\u4F7F\u7528\u8D26\u53F7\u5BC6\u7801\u767B\u5F55</span>
      <span v-if="type !== 'qrcode'" class="tip" @click="switchType('qrcode')">\u4F7F\u7528\u5FAE\u4FE1\u626B\u7801\u767B\u5F55</span>
      <span v-if="type !== 'phone'" class="tip" @click="switchType('phone')">\u4F7F\u7528\u624B\u673A\u53F7\u767B\u5F55</span>
    </div> `)]),_:1},8,["class","data"])}}});var Q=I(K,[["__scopeId","data-v-00a39d7a"],["__file","C:/code/wp-2024-11-19/admin/fe/src/pages/login/components/Login.vue"]]);const W={class:"switch-container"},X=T({__name:"Register",emits:["registerSuccess"],setup(A,{emit:c}){const r={phone:"",email:"",password:"",verifyCode:"",checked:!1},w={phone:[{required:!0,message:"\u624B\u673A\u53F7\u5FC5\u586B",type:"error"}],email:[{required:!0,message:"\u90AE\u7BB1\u5FC5\u586B",type:"error"},{email:!0,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1",type:"warning"}],password:[{required:!0,message:"\u5BC6\u7801\u5FC5\u586B",type:"error"}],verifyCode:[{required:!0,message:"\u9A8C\u8BC1\u7801\u5FC5\u586B",type:"error"}]},n=d("phone"),b=d(),u=d({...r}),v=d(!1),[D,E]=z(),R=c,f=({validateResult:p})=>{if(p===!0){if(!u.value.checked){V.error("\u8BF7\u540C\u610FTDesign\u670D\u52A1\u534F\u8BAE\u548CTDesign \u9690\u79C1\u58F0\u660E");return}V.success("\u6CE8\u518C\u6210\u529F"),R("registerSuccess")}},s=p=>{b.value.reset(),n.value=p};return(p,e)=>{const F=l("t-icon"),k=l("t-input"),B=l("t-form-item"),x=l("t-button"),g=l("t-checkbox"),$=l("t-form");return m(),C($,{ref_key:"form",ref:b,class:S(["item-container",`register-${n.value}`]),data:u.value,rules:w,"label-width":"0",onSubmit:f},{default:o(()=>[n.value=="phone"?(m(),C(B,{key:0,name:"phone"},{default:o(()=>[t(k,{modelValue:u.value.phone,"onUpdate:modelValue":e[0]||(e[0]=i=>u.value.phone=i),maxlength:11,size:"large",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u53F7"},{"prefix-icon":o(()=>[t(F,{name:"user"})]),_:1},8,["modelValue"])]),_:1})):a("v-if",!0),n.value=="email"?(m(),C(B,{key:1,name:"email"},{default:o(()=>[t(k,{modelValue:u.value.email,"onUpdate:modelValue":e[1]||(e[1]=i=>u.value.email=i),type:"text",size:"large",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u90AE\u7BB1"},{"prefix-icon":o(()=>[t(F,{name:"mail"})]),_:1},8,["modelValue"])]),_:1})):a("v-if",!0),t(B,{name:"password"},{default:o(()=>[t(k,{modelValue:u.value.password,"onUpdate:modelValue":e[3]||(e[3]=i=>u.value.password=i),size:"large",type:v.value?"text":"password",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},{"prefix-icon":o(()=>[t(F,{name:"lock-on"})]),"suffix-icon":o(()=>[t(F,{name:v.value?"browse":"browse-off",onClick:e[2]||(e[2]=i=>v.value=!v.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),n.value=="phone"?(m(),C(B,{key:2,class:"verification-code",name:"verifyCode"},{default:o(()=>[t(k,{modelValue:u.value.verifyCode,"onUpdate:modelValue":e[4]||(e[4]=i=>u.value.verifyCode=i),size:"large",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"},null,8,["modelValue"]),t(x,{variant:"outline",disabled:h(D)>0,onClick:h(E)},{default:o(()=>[y(U(h(D)==0?"\u53D1\u9001\u9A8C\u8BC1\u7801":`${h(D)}\u79D2\u540E\u53EF\u91CD\u53D1`),1)]),_:1},8,["disabled","onClick"])]),_:1})):a("v-if",!0),t(B,{class:"check-container",name:"checked"},{default:o(()=>[t(g,{modelValue:u.value.checked,"onUpdate:modelValue":e[5]||(e[5]=i=>u.value.checked=i)},{default:o(()=>e[7]||(e[7]=[y("\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F ")])),_:1},8,["modelValue"]),e[8]||(e[8]=y()),e[9]||(e[9]=_("span",null,"TDesign\u670D\u52A1\u534F\u8BAE",-1)),e[10]||(e[10]=y(" \u548C ")),e[11]||(e[11]=_("span",null,"TDesign \u9690\u79C1\u58F0\u660E",-1))]),_:1}),t(B,null,{default:o(()=>[t(x,{block:"",size:"large",type:"submit"},{default:o(()=>e[12]||(e[12]=[y(" \u6CE8\u518C ")])),_:1})]),_:1}),_("div",W,[_("span",{class:"tip",onClick:e[6]||(e[6]=i=>s(n.value=="phone"?"email":"phone"))},U(n.value=="phone"?"\u4F7F\u7528\u90AE\u7BB1\u6CE8\u518C":"\u4F7F\u7528\u624B\u673A\u53F7\u6CE8\u518C"),1)])]),_:1},8,["class","data"])}}});var Y=I(X,[["__scopeId","data-v-1e63d122"],["__file","C:/code/wp-2024-11-19/admin/fe/src/pages/login/components/Register.vue"]]);const Z={class:"login-wrapper"},ee={class:"login-container"},ue={name:"LoginIndex"},te=T({...ue,setup(A){const c=d("login"),r=w=>{c.value=w};return(w,n)=>(m(),q("div",Z,[a(" <login-header /> "),_("div",ee,[n[1]||(n[1]=_("div",{class:"title-container"},[_("h1",{class:"title margin-no"},"\u767B\u5F55\u5230"),_("h1",{class:"title"},"Hanyial Admin"),a(` <div class="sub-title">
          <p class="tip">{{ type == 'register' ? '\u5DF2\u6709\u8D26\u53F7?' : '\u6CA1\u6709\u8D26\u53F7\u5417?' }}</p>
          <p class="tip" @click="switchType(type == 'register' ? 'login' : 'register')">
            {{ type == 'register' ? '\u767B\u5F55' : '\u6CE8\u518C\u65B0\u8D26\u53F7' }}
          </p>
        </div> `)],-1)),c.value==="login"?(m(),C(Q,{key:0})):(m(),C(Y,{key:1,onRegisterSuccess:n[0]||(n[0]=b=>r("login"))})),t(G)]),a(' <footer class="copyright">Copyright @ 2021-2022 Tencent. All Rights Reserved</footer> ')]))}});var se=I(te,[["__scopeId","data-v-247e7dd8"],["__file","C:/code/wp-2024-11-19/admin/fe/src/pages/login/index.vue"]]);export{se as default};
